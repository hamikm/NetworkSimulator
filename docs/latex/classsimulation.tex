\hypertarget{classsimulation}{\section{simulation Class Reference}
\label{classsimulation}\index{simulation@{simulation}}
}


Represents the simulation.  




{\ttfamily \#include $<$simulation.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classsimulation_a4d5d5e617072409f1e5161ab048417df}{simulation} (const char $\ast$inputfile)
\begin{DoxyCompactList}\small\item\em Parses the J\-S\-O\-N file stored at {\ttfamily inputfile} and populates in-\/memory hosts, routers, links, and flows. \end{DoxyCompactList}\item 
\hyperlink{classsimulation_ae87d935230f2887512bbea182b0b5cda}{simulation} ()
\begin{DoxyCompactList}\small\item\em Default constructor which does nothing. \end{DoxyCompactList}\item 
\hypertarget{classsimulation_ac84df84c712163d5378db4b4fe62bc98}{\hyperlink{classsimulation_ac84df84c712163d5378db4b4fe62bc98}{$\sim$simulation} ()}\label{classsimulation_ac84df84c712163d5378db4b4fe62bc98}

\begin{DoxyCompactList}\small\item\em Deletes all the dynamically allocated network objects like hosts, routers, and so forth. \end{DoxyCompactList}\item 
void \hyperlink{classsimulation_ab9cca253149bda798b6eb13d1cf5638b}{parse\-\_\-\-J\-S\-O\-N\-\_\-input} (string jsonstring)
\begin{DoxyCompactList}\small\item\em Takes the full J\-S\-O\-N string passed in, parses it, and fills the in-\/memory collections of hosts, routers, links, and flows. \end{DoxyCompactList}\item 
void \hyperlink{classsimulation_a366ffcaf60b3a5eb1ff42f1524af2951}{print\-\_\-network} (ostream \&os) const 
\begin{DoxyCompactList}\small\item\em Prints hosts, routers, links, and flows to given output stream. \end{DoxyCompactList}\item 
map$<$ string, \hyperlink{classnethost}{nethost} $\ast$ $>$ \hyperlink{classsimulation_ac0ec3b4f06a25fed498115a7cf5eb21e}{get\-Hosts} () const 
\begin{DoxyCompactList}\small\item\em Getter for the string to host-\/pointer map. \end{DoxyCompactList}\item 
map$<$ string, \hyperlink{classnetrouter}{netrouter} $\ast$ $>$ \hyperlink{classsimulation_a1dac927fa94d498f9b8d4654abb7654a}{get\-Routers} () const 
\begin{DoxyCompactList}\small\item\em Getter for the string to router-\/pointer map. \end{DoxyCompactList}\item 
void \hyperlink{classsimulation_aeea7e33c3d6b0c480b0412ae967eef02}{run\-Simulation} ()
\begin{DoxyCompactList}\small\item\em Runs the simulation by loading some initial events into the {\ttfamily events} queue then starts a loop over the events, calling the {\ttfamily run\-Event} function on each of them, and continues until the {\ttfamily events} queue empties. \end{DoxyCompactList}\item 
void \hyperlink{classsimulation_af058039cd3a15fc654474d70ab32b73f}{add\-Event} (\hyperlink{classevent}{event} $\ast$e)
\begin{DoxyCompactList}\small\item\em Adds an event to the simulation's event queue. \end{DoxyCompactList}\item 
void \hyperlink{classsimulation_ac892d078077d836e1485250fefa4d203}{remove\-Event} (\hyperlink{classevent}{event} $\ast$e)
\begin{DoxyCompactList}\small\item\em Removes the given event from the simulation's event map. \end{DoxyCompactList}\item 
int \hyperlink{classsimulation_a1f3e3d3f46dded9a502798fa365c9970}{get\-Evt\-Count} () const 
\begin{DoxyCompactList}\small\item\em Helper function for logging once every L\-O\-G\-\_\-\-F\-R\-E\-Q\-U\-E\-N\-C\-Y. \end{DoxyCompactList}\item 
string \hyperlink{classsimulation_a12f82c019cfc771eccd95757ede9d91c}{get\-Log\-Name} () const 
\begin{DoxyCompactList}\small\item\em Getter for the logger filename. \end{DoxyCompactList}\item 
int \hyperlink{classsimulation_a0f6146fb1f1be72aaeee46f05335b4d5}{initialize\-Log} (string filename)
\begin{DoxyCompactList}\small\item\em Initializes and sets up a data log for the simulation object by creating new file called \char`\"{}filename.\-json\char`\"{} and adds the first line. \end{DoxyCompactList}\item 
int \hyperlink{classsimulation_ac3aefae7b2523c907f630e33efb867c4}{close\-Log} ()
\begin{DoxyCompactList}\small\item\em After simulation has finished i.\-e. \end{DoxyCompactList}\item 
int \hyperlink{classsimulation_a13a372f20510ed79c4c09e1388d61b31}{log\-Event} (double curr\-Time)
\begin{DoxyCompactList}\small\item\em Called everytime an event is run/\char`\"{}popped\char`\"{}. \end{DoxyCompactList}\item 
void \hyperlink{classsimulation_af0d59551fb98eb179d65672612181947}{append\-Event\-Metric} (json \hyperlink{classevent}{event}, ofstream \&logger)
\begin{DoxyCompactList}\small\item\em Helper function to log\-Event. \end{DoxyCompactList}\item 
json \hyperlink{classsimulation_a25ed31837d99451a9e934f439e7e3388}{log\-Link\-Metric} (\hyperlink{classnetlink}{netlink} link, double curr\-Time)
\begin{DoxyCompactList}\small\item\em Helper function to log\-Event. \end{DoxyCompactList}\item 
json \hyperlink{classsimulation_a06a1752d4e24bdf3f885bddabcf0d30c}{log\-Flow\-Metric} (\hyperlink{classnetflow}{netflow} flow, double curr\-Time)
\begin{DoxyCompactList}\small\item\em Helper function to log\-Event. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Represents the simulation. 

Sets up network based on .json input file and runs network simulation. T\-C\-P protocol to use indicated as flow parameter in .json input file. Each simulation object has an associated logger file to which simulation metrics re written. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classsimulation_a4d5d5e617072409f1e5161ab048417df}{\index{simulation@{simulation}!simulation@{simulation}}
\index{simulation@{simulation}!simulation@{simulation}}
\subsubsection[{simulation}]{\setlength{\rightskip}{0pt plus 5cm}simulation\-::simulation (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{inputfile}
\end{DoxyParamCaption}
)}}\label{classsimulation_a4d5d5e617072409f1e5161ab048417df}


Parses the J\-S\-O\-N file stored at {\ttfamily inputfile} and populates in-\/memory hosts, routers, links, and flows. 


\begin{DoxyParams}{Parameters}
{\em inputfile} & J\-S\-O\-N filename. Points to description of network. \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_ae87d935230f2887512bbea182b0b5cda}{\index{simulation@{simulation}!simulation@{simulation}}
\index{simulation@{simulation}!simulation@{simulation}}
\subsubsection[{simulation}]{\setlength{\rightskip}{0pt plus 5cm}simulation\-::simulation (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classsimulation_ae87d935230f2887512bbea182b0b5cda}


Default constructor which does nothing. 

Might be used in tests. 
\begin{DoxyParams}{Parameters}
{\em inputfile} & J\-S\-O\-N filename. Points to description of network. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classsimulation_af058039cd3a15fc654474d70ab32b73f}{\index{simulation@{simulation}!add\-Event@{add\-Event}}
\index{add\-Event@{add\-Event}!simulation@{simulation}}
\subsubsection[{add\-Event}]{\setlength{\rightskip}{0pt plus 5cm}void simulation\-::add\-Event (
\begin{DoxyParamCaption}
\item[{{\bf event} $\ast$}]{e}
\end{DoxyParamCaption}
)}}\label{classsimulation_af058039cd3a15fc654474d70ab32b73f}


Adds an event to the simulation's event queue. 

Event objects have a reference to this simulation so they can add events they need to generate by invoking this function. 
\begin{DoxyParams}{Parameters}
{\em e} & event to add to the simulation's {\ttfamily events} queue \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_af0d59551fb98eb179d65672612181947}{\index{simulation@{simulation}!append\-Event\-Metric@{append\-Event\-Metric}}
\index{append\-Event\-Metric@{append\-Event\-Metric}!simulation@{simulation}}
\subsubsection[{append\-Event\-Metric}]{\setlength{\rightskip}{0pt plus 5cm}void simulation\-::append\-Event\-Metric (
\begin{DoxyParamCaption}
\item[{json}]{event, }
\item[{ofstream \&}]{logger}
\end{DoxyParamCaption}
)}}\label{classsimulation_af0d59551fb98eb179d65672612181947}


Helper function to log\-Event. 

Appends a ',' before appending a .json formatted event metric to a logger file, except for the first event logged. 
\begin{DoxyParams}{Parameters}
{\em event} & current event being logged \\
\hline
{\em logger} & file to log data into \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_ac3aefae7b2523c907f630e33efb867c4}{\index{simulation@{simulation}!close\-Log@{close\-Log}}
\index{close\-Log@{close\-Log}!simulation@{simulation}}
\subsubsection[{close\-Log}]{\setlength{\rightskip}{0pt plus 5cm}int simulation\-::close\-Log (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classsimulation_ac3aefae7b2523c907f630e33efb867c4}


After simulation has finished i.\-e. 

all events have logged data adds the last line to make the logger a valid J\-S\-O\-N file. \begin{DoxyReturn}{Returns}
0 returned if successful 
\end{DoxyReturn}
\hypertarget{classsimulation_a1f3e3d3f46dded9a502798fa365c9970}{\index{simulation@{simulation}!get\-Evt\-Count@{get\-Evt\-Count}}
\index{get\-Evt\-Count@{get\-Evt\-Count}!simulation@{simulation}}
\subsubsection[{get\-Evt\-Count}]{\setlength{\rightskip}{0pt plus 5cm}int simulation\-::get\-Evt\-Count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classsimulation_a1f3e3d3f46dded9a502798fa365c9970}


Helper function for logging once every L\-O\-G\-\_\-\-F\-R\-E\-Q\-U\-E\-N\-C\-Y. 

\begin{DoxyReturn}{Returns}
event\-Count counter for number of events logged so far 
\end{DoxyReturn}
\hypertarget{classsimulation_ac0ec3b4f06a25fed498115a7cf5eb21e}{\index{simulation@{simulation}!get\-Hosts@{get\-Hosts}}
\index{get\-Hosts@{get\-Hosts}!simulation@{simulation}}
\subsubsection[{get\-Hosts}]{\setlength{\rightskip}{0pt plus 5cm}map$<$ string, {\bf nethost} $\ast$ $>$ simulation\-::get\-Hosts (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classsimulation_ac0ec3b4f06a25fed498115a7cf5eb21e}


Getter for the string to host-\/pointer map. 

\begin{DoxyReturn}{Returns}
hosts 
\end{DoxyReturn}
\hypertarget{classsimulation_a12f82c019cfc771eccd95757ede9d91c}{\index{simulation@{simulation}!get\-Log\-Name@{get\-Log\-Name}}
\index{get\-Log\-Name@{get\-Log\-Name}!simulation@{simulation}}
\subsubsection[{get\-Log\-Name}]{\setlength{\rightskip}{0pt plus 5cm}string simulation\-::get\-Log\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classsimulation_a12f82c019cfc771eccd95757ede9d91c}


Getter for the logger filename. 

\begin{DoxyReturn}{Returns}
log\-Name name of log file 
\end{DoxyReturn}
\hypertarget{classsimulation_a1dac927fa94d498f9b8d4654abb7654a}{\index{simulation@{simulation}!get\-Routers@{get\-Routers}}
\index{get\-Routers@{get\-Routers}!simulation@{simulation}}
\subsubsection[{get\-Routers}]{\setlength{\rightskip}{0pt plus 5cm}map$<$ string, {\bf netrouter} $\ast$ $>$ simulation\-::get\-Routers (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{classsimulation_a1dac927fa94d498f9b8d4654abb7654a}


Getter for the string to router-\/pointer map. 

\begin{DoxyReturn}{Returns}
router 
\end{DoxyReturn}
\hypertarget{classsimulation_a0f6146fb1f1be72aaeee46f05335b4d5}{\index{simulation@{simulation}!initialize\-Log@{initialize\-Log}}
\index{initialize\-Log@{initialize\-Log}!simulation@{simulation}}
\subsubsection[{initialize\-Log}]{\setlength{\rightskip}{0pt plus 5cm}int simulation\-::initialize\-Log (
\begin{DoxyParamCaption}
\item[{string}]{filename}
\end{DoxyParamCaption}
)}}\label{classsimulation_a0f6146fb1f1be72aaeee46f05335b4d5}


Initializes and sets up a data log for the simulation object by creating new file called \char`\"{}filename.\-json\char`\"{} and adds the first line. 


\begin{DoxyParams}{Parameters}
{\em filename} & name to give to log file \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 returned if successful 
\end{DoxyReturn}
\hypertarget{classsimulation_a13a372f20510ed79c4c09e1388d61b31}{\index{simulation@{simulation}!log\-Event@{log\-Event}}
\index{log\-Event@{log\-Event}!simulation@{simulation}}
\subsubsection[{log\-Event}]{\setlength{\rightskip}{0pt plus 5cm}int simulation\-::log\-Event (
\begin{DoxyParamCaption}
\item[{double}]{curr\-Time}
\end{DoxyParamCaption}
)}}\label{classsimulation_a13a372f20510ed79c4c09e1388d61b31}


Called everytime an event is run/\char`\"{}popped\char`\"{}. 

Sweeps for all relevant metrics of time curr\-Time stored in event object and then writes to file. 
\begin{DoxyParams}{Parameters}
{\em curr\-Time} & occurrance time of event currently being logged \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 returned if successful 
\end{DoxyReturn}
\hypertarget{classsimulation_a06a1752d4e24bdf3f885bddabcf0d30c}{\index{simulation@{simulation}!log\-Flow\-Metric@{log\-Flow\-Metric}}
\index{log\-Flow\-Metric@{log\-Flow\-Metric}!simulation@{simulation}}
\subsubsection[{log\-Flow\-Metric}]{\setlength{\rightskip}{0pt plus 5cm}json simulation\-::log\-Flow\-Metric (
\begin{DoxyParamCaption}
\item[{{\bf netflow}}]{flow, }
\item[{double}]{curr\-Time}
\end{DoxyParamCaption}
)}}\label{classsimulation_a06a1752d4e24bdf3f885bddabcf0d30c}


Helper function to log\-Event. 

Retrieves flow I\-D, flow rate, window size, and packet delay of a single flow, and formats metrics into json. 
\begin{DoxyParams}{Parameters}
{\em flow} & \\
\hline
{\em curr\-Time} & occurrance time of event currently being logged \\
\hline
{\em returns} & metrics for input flow in J\-S\-O\-N format \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_a25ed31837d99451a9e934f439e7e3388}{\index{simulation@{simulation}!log\-Link\-Metric@{log\-Link\-Metric}}
\index{log\-Link\-Metric@{log\-Link\-Metric}!simulation@{simulation}}
\subsubsection[{log\-Link\-Metric}]{\setlength{\rightskip}{0pt plus 5cm}json simulation\-::log\-Link\-Metric (
\begin{DoxyParamCaption}
\item[{{\bf netlink}}]{link, }
\item[{double}]{curr\-Time}
\end{DoxyParamCaption}
)}}\label{classsimulation_a25ed31837d99451a9e934f439e7e3388}


Helper function to log\-Event. 

Retrieves link I\-D, link rate, link buffer occupancy, and packet loss of single link and formats metrics into json. 
\begin{DoxyParams}{Parameters}
{\em link} & \\
\hline
{\em curr\-Time} & occurrance time of event currently being logged \\
\hline
{\em returns} & metrics for input link in J\-S\-O\-N format \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_ab9cca253149bda798b6eb13d1cf5638b}{\index{simulation@{simulation}!parse\-\_\-\-J\-S\-O\-N\-\_\-input@{parse\-\_\-\-J\-S\-O\-N\-\_\-input}}
\index{parse\-\_\-\-J\-S\-O\-N\-\_\-input@{parse\-\_\-\-J\-S\-O\-N\-\_\-input}!simulation@{simulation}}
\subsubsection[{parse\-\_\-\-J\-S\-O\-N\-\_\-input}]{\setlength{\rightskip}{0pt plus 5cm}void simulation\-::parse\-\_\-\-J\-S\-O\-N\-\_\-input (
\begin{DoxyParamCaption}
\item[{string}]{jsonstring}
\end{DoxyParamCaption}
)}}\label{classsimulation_ab9cca253149bda798b6eb13d1cf5638b}


Takes the full J\-S\-O\-N string passed in, parses it, and fills the in-\/memory collections of hosts, routers, links, and flows. 


\begin{DoxyParams}{Parameters}
{\em jsonstring} & full J\-S\-O\-N string consisting of network description \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
S\-T\-L collections of hosts, routers, links, and flows are filled in 
\end{DoxyPostcond}
\begin{DoxyWarning}{Warning}
routing tables A\-R\-E N\-O\-T I\-N\-I\-T\-I\-A\-L\-I\-Z\-E\-D H\-E\-R\-E. 
\end{DoxyWarning}
\hypertarget{classsimulation_a366ffcaf60b3a5eb1ff42f1524af2951}{\index{simulation@{simulation}!print\-\_\-network@{print\-\_\-network}}
\index{print\-\_\-network@{print\-\_\-network}!simulation@{simulation}}
\subsubsection[{print\-\_\-network}]{\setlength{\rightskip}{0pt plus 5cm}void simulation\-::print\-\_\-network (
\begin{DoxyParamCaption}
\item[{ostream \&}]{os}
\end{DoxyParamCaption}
) const}}\label{classsimulation_a366ffcaf60b3a5eb1ff42f1524af2951}


Prints hosts, routers, links, and flows to given output stream. 


\begin{DoxyParams}{Parameters}
{\em os} & the output stream to which to print. \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_ac892d078077d836e1485250fefa4d203}{\index{simulation@{simulation}!remove\-Event@{remove\-Event}}
\index{remove\-Event@{remove\-Event}!simulation@{simulation}}
\subsubsection[{remove\-Event}]{\setlength{\rightskip}{0pt plus 5cm}void simulation\-::remove\-Event (
\begin{DoxyParamCaption}
\item[{{\bf event} $\ast$}]{e}
\end{DoxyParamCaption}
)}}\label{classsimulation_ac892d078077d836e1485250fefa4d203}


Removes the given event from the simulation's event map. 


\begin{DoxyParams}{Parameters}
{\em e} & event to remove \\
\hline
\end{DoxyParams}
\hypertarget{classsimulation_aeea7e33c3d6b0c480b0412ae967eef02}{\index{simulation@{simulation}!run\-Simulation@{run\-Simulation}}
\index{run\-Simulation@{run\-Simulation}!simulation@{simulation}}
\subsubsection[{run\-Simulation}]{\setlength{\rightskip}{0pt plus 5cm}void simulation\-::run\-Simulation (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classsimulation_aeea7e33c3d6b0c480b0412ae967eef02}


Runs the simulation by loading some initial events into the {\ttfamily events} queue then starts a loop over the events, calling the {\ttfamily run\-Event} function on each of them, and continues until the {\ttfamily events} queue empties. 

Note that each event can (1) modify the host, flow, router, or link data structures in this simulation object, (2) add new events to this simulation object's event queue, or (3) log data into this simulation object's related log file. This function is not responsible for writing the data logger's data to disk--the caller (individual event) is. 

The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/\hyperlink{simulation_8h}{simulation.\-h}\item 
src/simulation.\-cpp\end{DoxyCompactItemize}
